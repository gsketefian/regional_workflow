<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE workflow [

<!--
************************************************************************
Entities that are directly modified by the workflow generation scripts.
************************************************************************
-->

<!--
Parameters needed by the job scheduler.
-->
<!ENTITY ACCOUNT       "{{ account }}">
<!ENTITY SCHED         "{{ sched }}">
<!ENTITY QUEUE_DEFAULT "<{{ queue_default_tag }}>{{ queue_default }}</{{ queue_default_tag }}>">
<!ENTITY QUEUE_HPSS    "<{{ queue_hpss_tag }}>{{ queue_hpss }}</{{ queue_hpss_tag }}>">
<!ENTITY QUEUE_FCST    "<{{ queue_fcst_tag }}>{{ queue_fcst }}</{{ queue_fcst_tag }}>">

<!--
Workflow task names.
-->
<!ENTITY MAKE_GRID_TN      "{{ make_grid_tn }}">
<!ENTITY MAKE_OROG_TN      "{{ make_orog_tn }}">
<!ENTITY MAKE_SFC_CLIMO_TN "{{ make_sfc_climo_tn }}">
<!ENTITY GET_EXTRN_ICS_TN  "{{ get_extrn_ics_tn }}">
<!ENTITY GET_EXTRN_LBCS_TN "{{ get_extrn_lbcs_tn }}">
<!ENTITY MAKE_ICS_TN       "{{ make_ics_tn }}">
<!ENTITY MAKE_LBCS_TN      "{{ make_lbcs_tn }}">
<!ENTITY RUN_FCST_TN       "{{ run_fcst_tn }}">
<!ENTITY RUN_POST_TN       "{{ run_post_tn }}">

<!--
Number of nodes to use for each task.
-->
<!ENTITY NNODES_MAKE_GRID           "{{ nnodes_make_grid }}">
<!ENTITY NNODES_MAKE_OROG           "{{ nnodes_make_orog}}">
<!ENTITY NNODES_MAKE_SFC_CLIMO      "{{ nnodes_make_sfc_climo }}">
<!ENTITY NNODES_GET_EXTRN_MDL_FILES "{{ nnodes_get_extrn_mdl_files }}">
<!ENTITY NNODES_MAKE_ICS            "{{ nnodes_make_ics }}">
<!ENTITY NNODES_MAKE_LBCS           "{{ nnodes_make_lbcs }}">
<!ENTITY NNODES_RUN_FCST            "{{ nnodes_run_fcst }}">
<!ENTITY NNODES_RUN_POST            "{{ nnodes_run_post }}">

<!--
Number of logical processes per node for each task.  If running without
threading, this is equal to the number of MPI processes per node.
-->
<!ENTITY PPN_MAKE_GRID           "{{ ppn_make_grid }}">
<!ENTITY PPN_MAKE_OROG           "{{ ppn_make_orog }}">
<!ENTITY PPN_MAKE_SFC_CLIMO      "{{ ppn_make_sfc_climo }}">
<!ENTITY PPN_GET_EXTRN_MDL_FILES "{{ ppn_get_extrn_mdl_files }}">
<!ENTITY PPN_MAKE_ICS            "{{ ppn_make_ics }}">
<!ENTITY PPN_MAKE_LBCS           "{{ ppn_make_lbcs }}">
<!ENTITY PPN_RUN_FCST            "{{ ppn_run_fcst }}">
<!ENTITY PPN_RUN_POST            "{{ ppn_run_post }}">

<!--
Maximum wallclock time for each task.
-->
<!ENTITY WTIME_MAKE_GRID           "{{ wtime_make_grid }}">
<!ENTITY WTIME_MAKE_OROG           "{{ wtime_make_orog }}">
<!ENTITY WTIME_MAKE_SFC_CLIMO      "{{ wtime_make_sfc_climo }}">
<!ENTITY WTIME_GET_EXTRN_MDL_FILES "{{ wtime_get_extrn_mdl_files }}">
<!ENTITY WTIME_MAKE_ICS            "{{ wtime_make_ics }}">
<!ENTITY WTIME_MAKE_LBCS           "{{ wtime_make_lbcs }}">
<!ENTITY WTIME_RUN_FCST            "{{ wtime_run_fcst }}">
<!ENTITY WTIME_RUN_POST            "{{ wtime_run_post }}">

<!--
Flags that specify whether to run the preprocessing tasks.
-->
<!ENTITY RUN_TASK_MAKE_GRID      "{{ run_task_make_grid | upper }}">
<!ENTITY RUN_TASK_MAKE_OROG      "{{ run_task_make_orog | upper }}">
<!ENTITY RUN_TASK_MAKE_SFC_CLIMO "{{ run_task_make_sfc_climo | upper }}">

<!--
Number of physical cores per node for the current machine.  This is used
below in the <nodesize> tag, but that tag is not clearly documented.  This
parameter may be unnecessary since each task now has its own variable that
specifies the number of processes per node being used (the PPN_... entities).
-->
<!ENTITY NCORES_PER_NODE "{{ ncores_per_node }}">

<!--
Directories and files.
-->
<!ENTITY USHDIR                   "{{ ushdir }}">
<!ENTITY JOBSDIR                  "{{ jobsdir }}">
<!ENTITY LOGDIR                   "{{ logdir }}">
<!ENTITY CYCLE_BASEDIR            "{{ cycle_basedir }}">
<!ENTITY GLOBAL_VAR_DEFNS_FP      "{{ global_var_defns_fp }}">
<!ENTITY LOAD_MODULES_RUN_TASK_FP "{{ load_modules_run_task_fp }}">

<!--
External model information for generating ICs and LBCs.
-->
<!ENTITY EXTRN_MDL_NAME_ICS  "{{ extrn_mdl_name_ics }}">
<!ENTITY EXTRN_MDL_NAME_LBCS "{{ extrn_mdl_name_lbcs }}">

<!--
************************************************************************
Entities that are not directly modified by the workflow generation scripts
but are derived from the ones set above.
************************************************************************
-->
<!ENTITY PROC_MAKE_GRID           "&NNODES_MAKE_GRID;:ppn=&PPN_MAKE_GRID;">
<!ENTITY PROC_MAKE_OROG           "&NNODES_MAKE_OROG;:ppn=&PPN_MAKE_OROG;">
<!ENTITY PROC_MAKE_SFC_CLIMO      "&NNODES_MAKE_SFC_CLIMO;:ppn=&PPN_MAKE_SFC_CLIMO;">
<!ENTITY PROC_GET_EXTRN_MDL_FILES "&NNODES_GET_EXTRN_MDL_FILES;:ppn=&PPN_GET_EXTRN_MDL_FILES;">
<!ENTITY PROC_MAKE_ICS            "&NNODES_MAKE_ICS;:ppn=&PPN_MAKE_ICS;">
<!ENTITY PROC_MAKE_LBCS           "&NNODES_MAKE_LBCS;:ppn=&PPN_MAKE_LBCS;">
<!ENTITY PROC_RUN_FCST            "&NNODES_RUN_FCST;:ppn=&PPN_RUN_FCST;">
<!ENTITY PROC_RUN_POST            "&NNODES_RUN_POST;:ppn=&PPN_RUN_POST;">

<!ENTITY RSRC_MAKE_GRID           "<walltime>&WTIME_MAKE_GRID;</walltime>">
<!ENTITY RSRC_MAKE_OROG           "<walltime>&WTIME_MAKE_OROG;</walltime>">
<!ENTITY RSRC_MAKE_SFC_CLIMO      "<walltime>&WTIME_MAKE_SFC_CLIMO;</walltime>">
<!ENTITY RSRC_GET_EXTRN_MDL_FILES "<walltime>&WTIME_GET_EXTRN_MDL_FILES;</walltime>">
<!ENTITY RSRC_MAKE_ICS            "<walltime>&WTIME_MAKE_ICS;</walltime>">
<!ENTITY RSRC_MAKE_LBCS           "<walltime>&WTIME_MAKE_LBCS;</walltime>">
<!ENTITY RSRC_RUN_FCST            "<walltime>&WTIME_RUN_FCST;</walltime>">
<!ENTITY RSRC_RUN_POST            "<walltime>&WTIME_RUN_POST;</walltime>">

<!ENTITY RSRV_DEFAULT "&QUEUE_DEFAULT;<account>&ACCOUNT;</account>">
<!ENTITY RSRV_HPSS    "&QUEUE_HPSS;<account>&ACCOUNT;</account>">
<!ENTITY RSRV_FCST    "&QUEUE_FCST;<account>&ACCOUNT;</account>">

]>

<workflow realtime="F" scheduler="&SCHED;" cyclethrottle="20">

  {# Double quotes are required inside the strftime! Expect an error from reading the template if using single quotes. #}
  <cycledef group="at_start">{{ date_first_cycl.strftime("%M %H %d %m %Y *") }}</cycledef>
  <cycledef group="forecast">{{ date_first_cycl.strftime("%Y%m%d%H%M") }} {{ date_last_cycl.strftime("%Y%m%d%H%M") }} {{ cycl_freq }}</cycledef>

  <log>
    <cyclestr>&LOGDIR;/FV3SAR_wflow.log</cyclestr>
  </log>

<!-- 
The following command works to call the J-job for a given task (in this
case the MAKE_GRID_TN task) if in the script LOAD_MODULES_RUN_TASK_FP we 
do NOT call exec to run the J-job.  The command first sources the script
LOAD_MODULES_RUN_TASK_FP and then runs the J-job, so it is simpler than
calling exec and thus preferred if NCO accepts it.  Note that the portion
of the command that sources LOAD_MODULES_RUN_TASK_FP also passes an 
argument to it (the argument being the name of the task).  This works in
bash but it probably won't work in sh.

If this method is acceptable to NCO, then for clarity maybe we can
source LOAD_MODULES_RUN_TASK_FP within the J-job instead of here since
we are already sourcing other files in the J-job anyway.
-->
<!--
    <command>{ . &LOAD_MODULES_RUN_TASK_FP; "&MAKE_GRID_TN;";
               &JOBSDIR;/JREGIONAL_MAKE_GRID;
             }</command>
-->
<!--
The following command works if we call exec in LOAD_MODULES_RUN_TASK_FP
to run the J-job.  This passes the J-job script as the second argument
to LOAD_MODULES_RUN_TASK_FP (the first argument is the task name).  The
J-job then uses exec to run the J-job (while also terminating the LOAD_-
MODULES_RUN_TASK_FP script.
-->

{% if run_task_make_grid %}
<!--
************************************************************************
************************************************************************
-->
  <task name="&MAKE_GRID_TN;" cycledefs="at_start" maxtries="4">

    &RSRC_MAKE_GRID;
    &RSRV_DEFAULT;
    <command>&LOAD_MODULES_RUN_TASK_FP; "&MAKE_GRID_TN;" "&JOBSDIR;/JREGIONAL_MAKE_GRID"</command>
    <nodes>&PROC_MAKE_GRID;</nodes>
    <nodesize>&NCORES_PER_NODE;</nodesize>
    <jobname>&MAKE_GRID_TN;</jobname>
    <join><cyclestr>&LOGDIR;/&MAKE_GRID_TN;.log</cyclestr></join>

    <envar><name>GLOBAL_VAR_DEFNS_FP</name><value>&GLOBAL_VAR_DEFNS_FP;</value></envar>

  </task>

{% endif %}

{% if run_task_make_orog %}
<!--
************************************************************************
************************************************************************
-->
  <task name="&MAKE_OROG_TN;" cycledefs="at_start" maxtries="4">

    &RSRC_MAKE_OROG;
    &RSRV_DEFAULT;

    <command>&LOAD_MODULES_RUN_TASK_FP; "&MAKE_OROG_TN;" "&JOBSDIR;/JREGIONAL_MAKE_OROG"</command>
    <nodes>&PROC_MAKE_OROG;</nodes>
    <nodesize>&NCORES_PER_NODE;</nodesize>
    <jobname>&MAKE_OROG_TN;</jobname>
    <join><cyclestr>&LOGDIR;/&MAKE_OROG_TN;.log</cyclestr></join>

    <envar><name>GLOBAL_VAR_DEFNS_FP</name><value>&GLOBAL_VAR_DEFNS_FP;</value></envar>

    <dependency>
      <or>
<!--        <taskdep task="make_grid"/> -->
        <datadep age="00:00:00:05">&LOGDIR;/make_grid_task_complete.txt</datadep>
        <streq><left>&RUN_TASK_MAKE_GRID;</left><right>FALSE</right></streq>
      </or>
    </dependency>

  </task>
{% endif %}

{% if run_task_make_sfc_climo %}
<!--
************************************************************************
************************************************************************
-->
  <task name="&MAKE_SFC_CLIMO_TN;" cycledefs="at_start" maxtries="2">

    &RSRC_MAKE_SFC_CLIMO;
    &RSRV_DEFAULT;

    <command>&LOAD_MODULES_RUN_TASK_FP; "&MAKE_SFC_CLIMO_TN;" "&JOBSDIR;/JREGIONAL_MAKE_SFC_CLIMO"</command>
    <nodes>&PROC_MAKE_SFC_CLIMO;</nodes>
    <nodesize>&NCORES_PER_NODE;</nodesize>
    <jobname>&MAKE_SFC_CLIMO_TN;</jobname>
    <join><cyclestr>&LOGDIR;/&MAKE_SFC_CLIMO_TN;.log</cyclestr></join>

    <envar><name>GLOBAL_VAR_DEFNS_FP</name><value>&GLOBAL_VAR_DEFNS_FP;</value></envar>

    <dependency>
      <and>
        <or>
<!--          <taskdep task="&MAKE_GRID_TN;"/> -->
          <datadep age="00:00:00:05">&LOGDIR;/&MAKE_GRID_TN;_task_complete.txt</datadep>
          <streq><left>&RUN_TASK_MAKE_GRID;</left><right>FALSE</right></streq>
        </or>
        <or>
<!--          <taskdep task="&MAKE_OROG_TN;"/> -->
          <datadep age="00:00:00:05">&LOGDIR;/&MAKE_OROG_TN;_task_complete.txt</datadep>
          <streq><left>&RUN_TASK_MAKE_OROG;</left><right>FALSE</right></streq>
        </or>
      </and>
    </dependency>

  </task>
{% endif %}

<!--
************************************************************************
************************************************************************
-->
  <task name="&GET_EXTRN_ICS_TN;" maxtries="3">

    &RSRC_GET_EXTRN_MDL_FILES;
    &RSRV_HPSS;

    <command>&LOAD_MODULES_RUN_TASK_FP; "&GET_EXTRN_ICS_TN;" "&JOBSDIR;/JREGIONAL_GET_EXTRN_MDL_FILES"</command>
    <nodes>&PROC_GET_EXTRN_MDL_FILES;</nodes>
    <nodesize>&NCORES_PER_NODE;</nodesize>
    <jobname>&GET_EXTRN_ICS_TN;</jobname>
    <join><cyclestr>&LOGDIR;/&GET_EXTRN_ICS_TN;_@Y@m@d@H.log</cyclestr></join>

    <envar><name>GLOBAL_VAR_DEFNS_FP</name><value>&GLOBAL_VAR_DEFNS_FP;</value></envar>
    <envar><name>PDY</name><value><cyclestr>@Y@m@d</cyclestr></value></envar>
    <envar><name>CDATE</name><value><cyclestr>@Y@m@d@H</cyclestr></value></envar>
    <envar><name>CYCLE_DIR</name><value><cyclestr>&CYCLE_BASEDIR;/@Y@m@d@H</cyclestr></value></envar>
    <envar><name>EXTRN_MDL_NAME</name><value>&EXTRN_MDL_NAME_ICS;</value></envar>
    <envar><name>ICS_OR_LBCS</name><value>ICS</value></envar>

  </task>
<!--
************************************************************************
************************************************************************
-->
  <task name="&GET_EXTRN_LBCS_TN;" maxtries="3">

    &RSRC_GET_EXTRN_MDL_FILES;
    &RSRV_HPSS;

    <command>&LOAD_MODULES_RUN_TASK_FP; "&GET_EXTRN_LBCS_TN;" "&JOBSDIR;/JREGIONAL_GET_EXTRN_MDL_FILES"</command>
    <nodes>&PROC_GET_EXTRN_MDL_FILES;</nodes>
    <nodesize>&NCORES_PER_NODE;</nodesize>
    <jobname>&GET_EXTRN_LBCS_TN;</jobname>
    <join><cyclestr>&LOGDIR;/&GET_EXTRN_LBCS_TN;_@Y@m@d@H.log</cyclestr></join>

    <envar><name>GLOBAL_VAR_DEFNS_FP</name><value>&GLOBAL_VAR_DEFNS_FP;</value></envar>
    <envar><name>PDY</name><value><cyclestr>@Y@m@d</cyclestr></value></envar>
    <envar><name>CDATE</name><value><cyclestr>@Y@m@d@H</cyclestr></value></envar>
    <envar><name>CYCLE_DIR</name><value><cyclestr>&CYCLE_BASEDIR;/@Y@m@d@H</cyclestr></value></envar>
    <envar><name>EXTRN_MDL_NAME</name><value>&EXTRN_MDL_NAME_LBCS;</value></envar>
    <envar><name>ICS_OR_LBCS</name><value>LBCS</value></envar>

  </task>
<!--
************************************************************************
************************************************************************
-->
  <task name="&MAKE_ICS_TN;" maxtries="3">

    &RSRC_MAKE_ICS;
    &RSRV_DEFAULT;

    <command>&LOAD_MODULES_RUN_TASK_FP; "&MAKE_ICS_TN;" "&JOBSDIR;/JREGIONAL_MAKE_ICS"</command>
    <nodes>&PROC_MAKE_ICS;</nodes>
    <nodesize>&NCORES_PER_NODE;</nodesize>
    <jobname>&MAKE_ICS_TN;</jobname>
    <join><cyclestr>&LOGDIR;/&MAKE_ICS_TN;_@Y@m@d@H.log</cyclestr></join>

    <envar><name>GLOBAL_VAR_DEFNS_FP</name><value>&GLOBAL_VAR_DEFNS_FP;</value></envar>
    <envar><name>PDY</name><value><cyclestr>@Y@m@d</cyclestr></value></envar>
    <envar><name>CDATE</name><value><cyclestr>@Y@m@d@H</cyclestr></value></envar>
    <envar><name>CYCLE_DIR</name><value><cyclestr>&CYCLE_BASEDIR;/@Y@m@d@H</cyclestr></value></envar>

    <dependency>
      <and>
        <taskdep task="&GET_EXTRN_ICS_TN;"/>
        <or>
<!--          <taskdep task="&MAKE_GRID_TN;"/> -->
          <datadep age="00:00:00:05">&LOGDIR;/&MAKE_GRID_TN;_task_complete.txt</datadep>
          <streq><left>&RUN_TASK_MAKE_GRID;</left><right>FALSE</right></streq>
        </or>
        <or>
<!--          <taskdep task="&MAKE_OROG_TN;"/> -->
          <datadep age="00:00:00:05">&LOGDIR;/&MAKE_OROG_TN;_task_complete.txt</datadep>
          <streq><left>&RUN_TASK_MAKE_OROG;</left><right>FALSE</right></streq>
        </or>
        <or>
<!--          <taskdep task="&MAKE_SFC_CLIMO_TN;"/> -->
          <datadep age="00:00:00:05">&LOGDIR;/&MAKE_SFC_CLIMO_TN;_task_complete.txt</datadep>
          <streq><left>&RUN_TASK_MAKE_SFC_CLIMO;</left><right>FALSE</right></streq>
        </or>
      </and>
    </dependency>

  </task>
<!--
************************************************************************
************************************************************************
-->
  <task name="&MAKE_LBCS_TN;" maxtries="3">

    &RSRC_MAKE_LBCS;
    &RSRV_DEFAULT;

    <command>&LOAD_MODULES_RUN_TASK_FP; "&MAKE_LBCS_TN;" "&JOBSDIR;/JREGIONAL_MAKE_LBCS"</command>
    <nodes>&PROC_MAKE_LBCS;</nodes>
    <nodesize>&NCORES_PER_NODE;</nodesize>
    <jobname>&MAKE_LBCS_TN;</jobname>
    <join><cyclestr>&LOGDIR;/&MAKE_LBCS_TN;_@Y@m@d@H.log</cyclestr></join>

    <envar><name>GLOBAL_VAR_DEFNS_FP</name><value>&GLOBAL_VAR_DEFNS_FP;</value></envar>
    <envar><name>PDY</name><value><cyclestr>@Y@m@d</cyclestr></value></envar>
    <envar><name>CDATE</name><value><cyclestr>@Y@m@d@H</cyclestr></value></envar>
    <envar><name>CYCLE_DIR</name><value><cyclestr>&CYCLE_BASEDIR;/@Y@m@d@H</cyclestr></value></envar>

    <dependency>
      <and>
        <taskdep task="&GET_EXTRN_LBCS_TN;"/>
        <or>
<!--          <taskdep task="&MAKE_GRID_TN;"/> -->
          <datadep age="00:00:00:05">&LOGDIR;/&MAKE_GRID_TN;_task_complete.txt</datadep>
          <streq><left>&RUN_TASK_MAKE_GRID;</left><right>FALSE</right></streq>
        </or>
        <or>
<!--          <taskdep task="&MAKE_OROG_TN;"/> -->
          <datadep age="00:00:00:05">&LOGDIR;/&MAKE_OROG_TN;_task_complete.txt</datadep>
          <streq><left>&RUN_TASK_MAKE_OROG;</left><right>FALSE</right></streq>
        </or>
        <or>
<!--          <taskdep task="&MAKE_SFC_CLIMO_TN;"/> -->
          <datadep age="00:00:00:05">&LOGDIR;/&MAKE_SFC_CLIMO_TN;_task_complete.txt</datadep>
          <streq><left>&RUN_TASK_MAKE_SFC_CLIMO;</left><right>FALSE</right></streq>
        </or>
      </and>
    </dependency>

  </task>
<!--
************************************************************************
************************************************************************
-->
  <task name="&RUN_FCST_TN;" maxtries="3">

    &RSRC_RUN_FCST;
    &RSRV_FCST;

    <command>&LOAD_MODULES_RUN_TASK_FP; "&RUN_FCST_TN;" "&JOBSDIR;/JREGIONAL_RUN_FCST"</command>
    <nodes>&PROC_RUN_FCST;</nodes>
    <nodesize>&NCORES_PER_NODE;</nodesize>
    <jobname>&RUN_FCST_TN;</jobname>
    <join><cyclestr>&LOGDIR;/&RUN_FCST_TN;_@Y@m@d@H.log</cyclestr></join>

    <envar><name>GLOBAL_VAR_DEFNS_FP</name><value>&GLOBAL_VAR_DEFNS_FP;</value></envar>
    <envar><name>PDY</name><value><cyclestr>@Y@m@d</cyclestr></value></envar>
    <envar><name>CDATE</name><value><cyclestr>@Y@m@d@H</cyclestr></value></envar>
    <envar><name>CYCLE_DIR</name><value><cyclestr>&CYCLE_BASEDIR;/@Y@m@d@H</cyclestr></value></envar>

    <dependency>
      <and>
        <taskdep task="&MAKE_ICS_TN;"/>
        <taskdep task="&MAKE_LBCS_TN;"/>
      </and>
    </dependency>

  </task>
<!--
************************************************************************
************************************************************************
-->
  <metatask name="&RUN_POST_TN;">

    <var name="fhr"> {% for h in range(0, fcst_len_hrs+1) %}{{ " %02d" % h  }}{% endfor %} </var>

    <task name="&RUN_POST_TN;_#fhr#" maxtries="2">

      &RSRC_RUN_POST;
      &RSRV_DEFAULT;

      <command>&LOAD_MODULES_RUN_TASK_FP; "&RUN_POST_TN;" "&JOBSDIR;/JREGIONAL_RUN_POST"</command>
      <nodes>&PROC_RUN_POST;</nodes>
      <nodesize>&NCORES_PER_NODE;</nodesize>
      <jobname>&RUN_POST_TN;_#fhr#</jobname>
      <join><cyclestr>&LOGDIR;/&RUN_POST_TN;_#fhr#_@Y@m@d@H.log</cyclestr></join>

      <envar><name>GLOBAL_VAR_DEFNS_FP</name><value>&GLOBAL_VAR_DEFNS_FP;</value></envar>
      <envar><name>PDY</name><value><cyclestr>@Y@m@d</cyclestr></value></envar>
      <envar><name>CDATE</name><value><cyclestr>@Y@m@d@H</cyclestr></value></envar>
      <envar><name>CYCLE_DIR</name><value><cyclestr>&CYCLE_BASEDIR;/@Y@m@d@H</cyclestr></value></envar>
      <envar><name>cyc</name><value><cyclestr>@H</cyclestr></value></envar>
      <envar><name>fhr</name><value>#fhr#</value></envar>

      <dependency>
        <and>
          <datadep age="05:00"><cyclestr>&CYCLE_BASEDIR;/@Y@m@d@H/dynf0#fhr#.nc</cyclestr></datadep>
          <datadep age="05:00"><cyclestr>&CYCLE_BASEDIR;/@Y@m@d@H/phyf0#fhr#.nc</cyclestr></datadep>
        </and>
      </dependency>

    </task>

  </metatask>

</workflow>
